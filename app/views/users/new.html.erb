<section class="bg-light" id="contact">
  <div class="container">

    <div class="row">
      <div class="col-lg-12">

<%= form_with(model: @user, local: true) do |f| %>
        <% if @user.errors.any? %>
          <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
              <h6><%= @user.errors.count %>件のエラーがあります。</h6>
            </div>
            <div class="col-md-2"></div>
          </div>
          <div class="row" id="error_explanation">
            <div class="col-md-2"></div>
            <div class="col-md-8">
              <ul class="list-inline">
              <% @user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
              </ul>
            </div>
            <div class="col-md-2"></div>
          </div>
        <% end %>

          <div class="row">

            <div class="col-md-2"></div>
            <div class="col-md-8">
              <div class="form-group">
                <%= f.text_field :name, required: "required", \
                    placeholder: "名前", class: 'form-control' %>
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <%= f.email_field :email, required: "required", \
                    placeholder: "メールアドレス", class: 'form-control' %>
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <%= f.password_field :password, required: "required", \
                    placeholder: "パスワード", class: 'form-control' %>
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <%= f.password_field :password_confirmation, required: "required", \
                    placeholder: "パスワード（再入力）", class: 'form-control' %>
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <h6>アイコン画像</h6>
                <%= f.file_field :avatar, id: :user_avatar, class: 'form-control' %>
              </div>
              <!-- 確認画面から新規作成画面に戻った時         -->
              <!-- アップロードした画像を表示させるための記述 -->
              <div class="team-member">
                <% if !@user.avatar.file.nil? && @user.avatar.file.exists? %>
                <%= image_tag(@user.avatar.url, class: "mx-auto rounded-circle", alt: "アイコン画像" ) %>
                <% end %>
              </div>
              <!-- 確認画面から新規作成画面に戻った時に情報を保持するための記述 -->
              <%= f.hidden_field :avatar_cache %>
              <%= hidden_field_tag :"cache[avatar]", @user.avatar.cache_name %>
            </div>
            <div class="col-md-2"></div>

            <div class="clearfix"></div>

            <div class="col-lg-12 text-center">
              <%= f.submit "アカウント作成", class: 'btn btn-primary btn-xl' %>
            </div>

          </div>
<% end %>

      </div>
    </div>

  </div>
</section>
